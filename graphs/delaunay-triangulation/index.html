<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>Delaunay Triangulation</title>

        <link rel="stylesheet" type="text/css" href="style.css">

        <script src="../../libraries/p5.min.js"></script>
        <script>
            function displayVal(id, x) {
                document.getElementById(id).innerHTML = x;
            }

            function stepSimulation() {
                if (speed.value == 0) {
                    step();
                }
            }

            function resetSimulation() {
                setup(int(numVert.value));
            }

            function updateNumVertices() {
                displayVal('num-vert-display', numVert.value);
                resetSimulation();
            }

            window.addEventListener('resize', function(event) {
                windowWidth = window.innerWidth;
                windowHeight = window.innerHeight;
                resetSimulation();
            });
        </script>
    </head>

    <body style="font-family: Arial; word-break: normal">
        <div id="container" style="display: flex; width: 100%">
            <div id="sketch"></div>
            <div id="info">
                <div>
                    <h1>Delaunay Triangulation</h1>
                    <p>
                        This is a representation of the
                        <a href="https://en.wikipedia.org/wiki/Delaunay_triangulation" target="_blank">Delaunay triangulation</a>
                        of a set of points.
                        At each step of the simulation, a new point is added
                        to the set of points, and the triangulation is updated.
                        Setting the speed to minimum allows you to manually step
                        through the simulation, and setting it to maximum skips
                        to the final triangulation.
                    </p>
                    <p>
                        This is implemented with the
                        <a>Bowyer-Watson</a>
                        algorithm. The purpose of this program is to be able to
                        produce a planar graph.
                    </p>
                    <p>
                        The red dot and triangles are the corresponding elements
                        being updated in the current step. The pink dot is the
                        next point to be added to the set of points. The edges
                        moving off the screen are connected to the super triangle.
                    </p>
                    <input type="checkbox" id="round" onchange="resetSimulation()" checked> Round</input>
                    <input type="checkbox" id="allPoints" checked> All Points</input>
                    <input type="checkbox" id="detailed"> Detailed</input>
                    <div>
                        <p>Speed:</p>
                        <input style="width: 100%" type="range" min="0" max="100" value="25" id="speed">
                    </div>
                    <button onclick="stepSimulation()">Step</button>
                    <div>
                        <p>Vertices: <span id="num-vert-display">30</span></p>
                        <input style="width: 100%" type="range" min="3" max="300" value="30" id="numVert" onchange="updateNumVertices()">
                    </div>
                    <br>
                    <button onclick="resetSimulation()">Reset</button>
                </div>
                <div style="position: absolute; bottom: 2%; right: 2%">
                    <p style="text-align: right">
                        This visual was made with p5js
                        <br>
                        <br>
                        You can view my <a href="../../">other visuals</a>
                        <br>
                        <br>
                        Or check out the 
                        <a href="https://github.com/matthiebl/visuals/blob/master/graphs/delaunay-triangulation" target="_blank">source code</a>
                    </p>
                </div>
            </div>
        </div>
        <script src="../Graph.js"></script>
        <script src="TriangleMesh.js"></script>
        <script src="sketch.js"></script>
    </body>
</html>
